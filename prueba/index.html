<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plasti-Quiz 3¬∫ ESO</title>
    
    <!-- React y ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Estilos personalizados para animaciones -->
    <style>
        @keyframes spin-slow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        @keyframes bounce-slow {
            0%, 100% { transform: translateY(-10%); animation-timing-function: cubic-bezier(0.8, 0, 1, 1); }
            50% { transform: translateY(0); animation-timing-function: cubic-bezier(0, 0, 0.2, 1); }
        }
        .animate-spin-slow {
            animation: spin-slow 3s linear infinite;
        }
        .animate-bounce-slow {
            animation: bounce-slow 2s infinite;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- COMPONENTES DE ICONOS (SVG Inline) ---
        // Se ha a√±adido <></> (React Fragments) para agrupar m√∫ltiples elementos SVG
        
        const IconBase = ({ d, className, color }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                viewBox="0 0 24 24" 
                fill="none" 
                stroke="currentColor" 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round" 
                className={className}
                style={{ color: color }}
            >
                {d}
            </svg>
        );

        const Trophy = (props) => <IconBase {...props} d={<><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></>} />;
        const Heart = (props) => <IconBase {...props} d={<path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />} />;
        const RefreshCw = (props) => <IconBase {...props} d={<><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></>} />;
        
        // CORREGIDO: Se a√±adi√≥ <></> alrededor de los elementos path y line
        const AlertTriangle = (props) => <IconBase {...props} d={<><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></>} />;
        
        const CheckCircle2 = (props) => <IconBase {...props} d={<><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></>} />;
        const XCircle = (props) => <IconBase {...props} d={<><circle cx="12" cy="12" r="10"/><path d="m15 9-6 6"/><path d="m9 9 6 6"/></>} />;
        const Play = (props) => <IconBase {...props} d={<polygon points="5 3 19 12 5 21 5 3"/>} />;
        const ShoppingBag = (props) => <IconBase {...props} d={<><path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/><path d="M3 6h18"/><path d="M16 10a4 4 0 0 1-8 0"/></>} />;
        const Plug = (props) => <IconBase {...props} d={<><path d="M12 22v-5"/><path d="M9 8V2"/><path d="M15 8V2"/><path d="M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z"/></>} />;
        const Puzzle = (props) => <IconBase {...props} d={<path d="M19.439 10c.011.017.021.034.031.052a2.984 2.984 0 0 1 .494 1.83c0 1.488-1.127 2.73-2.585 2.946l-.38.056v5.114a.998.998 0 0 1-.998.998h-5.078c-.018.01-.035.02-.054.03a2.978 2.978 0 0 1-1.87.5 3.006 3.006 0 0 1-2.964-2.628l-.05-.376H3.002a.998.998 0 0 1-.999-.998v-5.079c-.01-.018-.02-.035-.03-.054a2.978 2.978 0 0 1-.5-1.87 3.006 3.006 0 0 1 2.628-2.964l.376-.05V4.502a.998.998 0 0 1 .998-.999h5.113c.018-.01.035-.02.054-.03a2.978 2.978 0 0 1 1.87-.5 3.006 3.006 0 0 1 2.964 2.628l.05.376h3.045a.998.998 0 0 1 .999.998v.484z" />} />;
        const LifeBuoy = (props) => <IconBase {...props} d={<><circle cx="12" cy="12" r="10"/><circle cx="12" cy="12" r="4"/><line x1="4.93" y1="4.93" x2="9.17" y2="9.17"/><line x1="14.83" y1="14.83" x2="19.07" y2="19.07"/><line x1="14.83" y1="9.17" x2="19.07" y2="4.93"/><line x1="14.83" y1="9.17" x2="18.36" y2="5.64"/><line x1="4.93" y1="19.07" x2="9.17" y2="14.83"/></>} />;
        const Coffee = (props) => <IconBase {...props} d={<><path d="M17 8h1a4 4 0 1 1 0 8h-1"/><path d="M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/><line x1="6" y1="1" x2="6" y2="4"/><line x1="10" y1="1" x2="10" y2="4"/><line x1="14" y1="1" x2="14" y2="4"/></>} />;
        const Layers = (props) => <IconBase {...props} d={<><polygon points="12 2 2 7 12 12 22 7 12 2"/><polyline points="2 17 12 22 22 17"/><polyline points="2 12 12 17 22 12"/></>} />;
        const Zap = (props) => <IconBase {...props} d={<polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>} />;
        const Hammer = (props) => <IconBase {...props} d={<><path d="m15 12-8.5 8.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L12 9"/><path d="M17.64 15 22 10.64"/><path d="m20.91 11.7-1.25-1.25c-.6-.6-.93-1.4-.93-2.25V2.46V2a2 2 0 0 0-2-2h-3a2 2 0 0 0-2 2v2.46c0 .85-.34 1.62-.93 2.25L9.64 8"/></>} />;


        // --- DATA: Base de datos de preguntas ---
        const questionsData = [
            {
                id: 1,
                name: "Botella de Agua",
                type: "termoplastico",
                icon: <Coffee className="w-16 h-16 text-blue-500" />,
                description: "Este material se ablanda con el calor y se puede moldear muchas veces.",
                fact: "Suele ser PET o HDPE. ¬°Es 100% reciclable si se deposita en el contenedor amarillo!"
            },
            {
                id: 2,
                name: "Neum√°tico de Coche",
                type: "elastomero",
                icon: <LifeBuoy className="w-16 h-16 text-stone-700" />,
                description: "Material muy el√°stico. Si lo estiras, recupera su forma original.",
                fact: "El caucho vulcanizado es un elast√≥mero. No se puede fundir de nuevo para darle otra forma."
            },
            {
                id: 3,
                name: "Mango de Sart√©n",
                type: "termoestable",
                icon: <Hammer className="w-16 h-16 text-red-600" />,
                description: "Soporta altas temperaturas sin deformarse, pero si se calienta demasiado se quema.",
                fact: "Es baquelita o resina. Sus cadenas de pol√≠meros est√°n fuertemente entrelazadas (curado)."
            },
            {
                id: 4,
                name: "Pieza de LEGO",
                type: "termoplastico",
                icon: <Puzzle className="w-16 h-16 text-yellow-500" />,
                description: "Pl√°stico duro y resistente, pero si lo calientas se derrite.",
                fact: "Es pl√°stico ABS. Al ser termopl√°stico, se inyecta en moldes para crearlo."
            },
            {
                id: 5,
                name: "Enchufe El√©ctrico",
                type: "termoestable",
                icon: <Plug className="w-16 h-16 text-gray-600" />,
                description: "Necesitamos que no se derrita si hay un chispazo o calor el√©ctrico.",
                fact: "Antiguamente baquelita, hoy resinas epoxi o melaninas. Son aislantes y r√≠gidos."
            },
            {
                id: 6,
                name: "Bolsa de Supermercado",
                type: "termoplastico",
                icon: <ShoppingBag className="w-16 h-16 text-pink-400" />,
                description: "Flexible, ligero y f√°cil de fundir para reciclar.",
                fact: "Es Polietileno (PE). Es el pl√°stico m√°s com√∫n del mundo."
            },
            {
                id: 7,
                name: "Traje de Buceo",
                type: "elastomero",
                icon: <Layers className="w-16 h-16 text-teal-600" />,
                description: "Se adapta al cuerpo y es flexible. A√≠sla del fr√≠o.",
                fact: "Es Neopreno, un caucho sint√©tico lleno de microburbujas de gas."
            },
            {
                id: 8,
                name: "Casco de Obra",
                type: "termoplastico",
                icon: <Zap className="w-16 h-16 text-orange-500" />,
                description: "Aunque es muy duro para proteger golpes, se fabrica molde√°ndolo con calor.",
                fact: "Suele ser Policarbonato o ABS. Alta resistencia al impacto."
            }
        ];

        // --- COMPONENTES UI ---

        const Button = ({ onClick, children, variant = 'primary', className = '' }) => {
            const baseStyle = "px-6 py-3 rounded-xl font-bold transition-all transform hover:scale-105 active:scale-95 shadow-md flex items-center justify-center gap-2";
            const variants = {
                primary: "bg-indigo-600 text-white hover:bg-indigo-700",
                termoplastico: "bg-blue-500 text-white hover:bg-blue-600 border-b-4 border-blue-700",
                termoestable: "bg-red-500 text-white hover:bg-red-600 border-b-4 border-red-700",
                elastomero: "bg-green-500 text-white hover:bg-green-600 border-b-4 border-green-700",
                outline: "border-2 border-indigo-600 text-indigo-600 hover:bg-indigo-50"
            };

            return (
                <button onClick={onClick} className={`${baseStyle} ${variants[variant]} ${className}`}>
                    {children}
                </button>
            );
        };

        const Card = ({ children, className = '' }) => (
            <div className={`bg-white rounded-2xl shadow-xl p-6 ${className}`}>
                {children}
            </div>
        );

        // --- APP PRINCIPAL ---

        function App() {
            const [gameState, setGameState] = useState('start'); // start, playing, feedback, gameover
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [lives, setLives] = useState(3);
            const [lastAnswerCorrect, setLastAnswerCorrect] = useState(false);
            const [questions, setQuestions] = useState([]);

            useEffect(() => {
                if (gameState === 'start') {
                    setQuestions([...questionsData].sort(() => Math.random() - 0.5));
                }
            }, [gameState]);

            const startGame = () => {
                setScore(0);
                setLives(3);
                setCurrentQuestionIndex(0);
                setGameState('playing');
            };

            const handleAnswer = (selectedType) => {
                const currentQ = questions[currentQuestionIndex];
                const isCorrect = currentQ.type === selectedType;

                setLastAnswerCorrect(isCorrect);
                if (isCorrect) {
                    setScore(score + 100);
                } else {
                    setLives(lives - 1);
                }
                setGameState('feedback');
            };

            const nextQuestion = () => {
                if (lives <= 0) {
                    setGameState('gameover');
                    return;
                }

                if (currentQuestionIndex + 1 < questions.length) {
                    setCurrentQuestionIndex(currentQuestionIndex + 1);
                    setGameState('playing');
                } else {
                    setGameState('gameover');
                }
            };

            // --- PANTALLA DE INICIO ---
            if (gameState === 'start') {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-indigo-100 to-purple-200 flex items-center justify-center p-4 font-sans">
                        <Card className="max-w-md w-full text-center space-y-6">
                            <div className="flex justify-center mb-4">
                                <RefreshCw className="w-20 h-20 text-indigo-600 animate-spin-slow" />
                            </div>
                            <h1 className="text-4xl font-extrabold text-gray-800">Plasti-Quiz 3¬∫ ESO</h1>
                            <p className="text-gray-600 text-lg">
                                ¬øSabes distinguir los materiales que nos rodean? 
                                Identifica si son <strong>Termopl√°sticos</strong>, <strong>Termoestables</strong> o <strong>Elast√≥meros</strong>.
                            </p>
                            
                            <div className="bg-blue-50 p-4 rounded-lg text-left text-sm space-y-2">
                                <p className="flex items-center text-blue-800"><span className="font-bold mr-2">üîµ Termopl√°sticos:</span> Se funden con calor. Reciclables.</p>
                                <p className="flex items-center text-red-800"><span className="font-bold mr-2">üî¥ Termoestables:</span> R√≠gidos, no se funden (se queman).</p>
                                <p className="flex items-center text-green-800"><span className="font-bold mr-2">üü¢ Elast√≥meros:</span> El√°sticos como la goma.</p>
                            </div>

                            <Button onClick={startGame} className="w-full text-xl flex items-center justify-center gap-2">
                                <Play size={24} /> ¬°Empezar el Reto!
                            </Button>
                        </Card>
                    </div>
                );
            }

            // --- PANTALLA DE JUEGO ---
            if (gameState === 'playing') {
                const currentQ = questions[currentQuestionIndex];
                
                return (
                    <div className="min-h-screen bg-slate-100 flex flex-col items-center p-4 font-sans">
                        {/* Header Stats */}
                        <div className="w-full max-w-lg flex justify-between items-center mb-8 bg-white p-4 rounded-xl shadow-sm">
                            <div className="flex items-center gap-2 text-yellow-500 font-bold text-xl">
                                <Trophy className="w-6 h-6" /> {score} pts
                            </div>
                            <div className="text-gray-400 font-medium">
                                Pregunta {currentQuestionIndex + 1} / {questions.length}
                            </div>
                            <div className="flex gap-1">
                                {[...Array(3)].map((_, i) => (
                                    <Heart key={i} className={`w-6 h-6 ${i < lives ? 'text-red-500 fill-red-500' : 'text-gray-300'}`} />
                                ))}
                            </div>
                        </div>

                        {/* Question Card */}
                        <Card className="max-w-lg w-full text-center relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-2 bg-indigo-500"></div>
                            
                            <div className="my-8 flex justify-center animate-bounce-slow">
                                {currentQ.icon}
                            </div>
                            
                            <h2 className="text-2xl font-bold text-gray-800 mb-2">{currentQ.name}</h2>
                            <p className="text-gray-500 mb-8">¬øA qu√© familia de pl√°sticos pertenece este objeto?</p>

                            <div className="grid grid-cols-1 gap-4">
                                <Button variant="termoplastico" onClick={() => handleAnswer('termoplastico')}>
                                    Termopl√°stico
                                </Button>
                                <Button variant="termoestable" onClick={() => handleAnswer('termoestable')}>
                                    Termoestable
                                </Button>
                                <Button variant="elastomero" onClick={() => handleAnswer('elastomero')}>
                                    Elast√≥mero
                                </Button>
                            </div>
                        </Card>
                    </div>
                );
            }

            // --- PANTALLA DE FEEDBACK ---
            if (gameState === 'feedback') {
                const currentQ = questions[currentQuestionIndex];
                
                return (
                    <div className="min-h-screen bg-slate-100 flex items-center justify-center p-4 font-sans">
                        <Card className={`max-w-md w-full text-center border-t-8 ${lastAnswerCorrect ? 'border-green-500' : 'border-red-500'}`}>
                            <div className="flex justify-center mb-4">
                                {lastAnswerCorrect ? (
                                    <CheckCircle2 className="w-20 h-20 text-green-500" />
                                ) : (
                                    <XCircle className="w-20 h-20 text-red-500" />
                                )}
                            </div>
                            
                            <h2 className="text-3xl font-bold mb-2">
                                {lastAnswerCorrect ? "¬°Correcto!" : "¬°Vaya, casi!"}
                            </h2>
                            
                            <div className="bg-gray-50 p-4 rounded-lg mb-6 text-left">
                                <p className="text-lg font-semibold text-indigo-700 mb-1">
                                    Es un {currentQ.type.charAt(0).toUpperCase() + currentQ.type.slice(1)}
                                </p>
                                <p className="text-gray-700 mb-4">{currentQ.description}</p>
                                
                                <div className="flex items-start gap-2 text-sm text-gray-500 bg-white p-3 rounded border border-gray-200">
                                    <AlertTriangle className="w-5 h-5 flex-shrink-0 text-yellow-500" />
                                    <span>{currentQ.fact}</span>
                                </div>
                            </div>

                            <Button onClick={nextQuestion} variant={lastAnswerCorrect ? 'primary' : 'outline'} className="w-full">
                                {lives > 0 ? "Siguiente Pregunta" : "Ver Resultados"}
                            </Button>
                        </Card>
                    </div>
                );
            }

            // --- PANTALLA DE GAME OVER ---
            if (gameState === 'gameover') {
                let title = "Novato del Pl√°stico";
                if (score >= 400) title = "T√©cnico en Pol√≠meros";
                if (score >= 700) title = "Maestro de Materiales";

                return (
                    <div className="min-h-screen bg-gradient-to-t from-indigo-900 to-slate-800 flex items-center justify-center p-4 font-sans">
                        <Card className="max-w-md w-full text-center bg-white/95 backdrop-blur">
                            <h2 className="text-3xl font-bold text-gray-800 mb-2">¬°Juego Terminado!</h2>
                            
                            <div className="py-8">
                                <p className="text-gray-500">Puntuaci√≥n Final</p>
                                <p className="text-6xl font-black text-indigo-600 mb-4">{score}</p>
                                
                                <div className="inline-block px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full font-bold text-sm border border-yellow-300">
                                    Rango: {title}
                                </div>
                            </div>

                            <div className="space-y-3">
                                <p className="text-sm text-gray-600 px-4">
                                {score === 800 
                                    ? "¬°Incre√≠ble! Has acertado todo. Est√°s listo para el examen." 
                                    : "Repasa las propiedades de los termoestables y vuelve a intentarlo."}
                                </p>
                                
                                <Button onClick={startGame} className="w-full mt-4">
                                    <RefreshCw className="inline mr-2 w-4 h-4" /> Jugar de nuevo
                                </Button>
                            </div>
                        </Card>
                    </div>
                );
            }
            
            return null;
        }

        // --- RENDERIZADO ---
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
